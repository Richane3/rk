<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="description" content="360&deg; Image - A-Frame">
<title>360_Image_test</title>
<script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
<script src="https://unpkg.com/aframe-template-component@3.x.x/dist/aframe-template-component.min.js"></script>
<script src="https://unpkg.com/aframe-layout-component@4.x.x/dist/aframe-layout-component.min.js"></script>
<script src="https://unpkg.com/aframe-event-set-component@5.x.x/dist/aframe-event-set-component.min.js"></script>
<script src="https://unpkg.com/aframe-html-shader@0.2.0/dist/aframe-html-shader.min.js"></script>
<script src="VRaR_Mix_test/html2canvas.min.js"></script>
<link rel="stylesheet" href="VRaR_Mix_test/style.css">
<script>
    AFRAME.registerComponent('cursor-listener', {
        init: function () {
            var lastIndex = -1;
            var COLORS = ['red', 'green', 'blue'];
            this.el.addEventListener('click', function (evt) {
                lastIndex = (lastIndex + 1) % COLORS.length;
                this.setAttribute('material', 'color', COLORS[lastIndex]);
                console.log('I was clicked at: ', evt.detail.intersection.point);
            });
        }
    });
</script>
</head>
<body>
 <div id="loader">
        <p>loading...</p>
    </div>
    <div id="target1" class="target">
        <img src="img/more.png" alt="learn more">
	    <div class="cf"><h3>詳細はこちら</h3><p>商品の詳細や料金を確認できます。</p><p font-size="px"><b>タップもしくは、カーソルを合わせてください</b></p></div>
    </div>
<a-scene>
	<a-assets>
		<img id="sky" src="img/pano_test.jpeg">
		</a-assets>
	<a-entity camera look-controls>
                <a-entity cursor="rayOrigin: mouse">
      </a-entity>
        </a-entity>
	
	<a-camera>
		<a-cursor fuse="true" color="black" scale="2 2">
		</a-cursor></a-camera>
	<a-sky src="#sky" rotation="0 -90 0"></a-sky>
			<a-entity class="link-object" data-link="https://loving-goodall-f9a8fe.netlify.app/" material="shader: html; target: #target1" position="-3 0.82153 -1" geometry="primitive: plane" rotation="-5 45 0" scale="2 1 1"></a-entity>
	</a-scene>
<script>var linkElements = document.getElementsByClassName("link-object");for (var i = 0; i < linkElements.length; i++) {
		linkElements[i].addEventListener('click', function() {var link = this.getAttribute('data-link');location.href = link;}, false);}</script>
</body>
<script>
    var scene = document.querySelector('a-scene');
    var run = function () {
        document.getElementById("loader").classList.add("hidden");
    }

    if (scene.hasLoaded) {
      run();
    } else {
      scene.addEventListener('loaded', run);
    }
</script>
</html>
