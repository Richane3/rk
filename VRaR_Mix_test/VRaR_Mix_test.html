<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="renderer" content="webkit">
    <meta name="Software-Name" content="Jietusoft">
    <title>VRaR_Mix_test</title>
    <meta name="Description" content="">
    <!--引入引导js 动态下载播放器-->
    <script language="javascript" type="text/javascript" src="assets/jsvto/player/dop.min.js"></script>
    <script language="javascript" type="text/javascript" src="assets/jsvto/player/UtoVRPlayerGuide.js"></script>
    <script language="javascript" type="text/javascript" src="assets/jsvto/player/UtoVRPlayerExtend.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            overflow: hidden;
            background-color: gray;
        }

    </style>
</head>

<body>
<div style="position:relative;width: 100%;height: 100%;">
    <div style="position:relative;width: 100%;height: 100%; overflow: hidden;" id="pano"></div>
</div>
</body>
<script language="javascript" type="text/javascript">
    var localData = {

        //以下为vtm需要配置的内容
        "encrypt": true, //是否是加密请求
        "ajaxBool":true, //是否进行ajax请求
        "ajaxUrl":"./Config/config.txt", //如果为ajax请求，请求的地址

        //是否是vtm需要额外的json数据请求
        "isVTM":false,
        "VTMOtherUrl":"json/otherCon.json", //如果是VTM，额外请求json的路径地址
    };

    /*初始化开始*/
    window.onload = function () {
		//页面从本地打开，自动跳转
		if(window.location.protocol == 'file:')
		{
			window.location.replace ( "./readme_jp.html" );
			return;
		}
		
		
        //判断当前是否需要ajax请求
        if(localData.ajaxBool){
            ajax(localData.ajaxUrl);
        }
        else{
            //直接使用localData数据
            initUtoVRPlayerExtend(localData);
        }
    };

    //请求数据的方法
    function ajax(url) {
        var time = +new Date();
        var req = new XMLHttpRequest();
        req.open("GET", url+"?time=" + time, true);
        req.send();
        req.onreadystatechange = function () {
            if (req.readyState == 4 && req.status == 200) {
                if(localData.encrypt){
                    //initJTLoad();
                    initUtoVRPlayerExtend({
                        encrypt:true,
                        value:req.responseText
                    }, localData);
                }
                else{
                    var inSetting = JSON.parse(req.responseText);
                    initUtoVRPlayerExtend(inSetting, localData);
                    //initJTLoad();
                }
            }
        }
    }
</script>

</html>
